<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pricing Calculator Documentation</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 2em; background: #f8fafd; color: #222; }
        h1, h2, h3, h4 { color: #1976d2; }
        h1 { font-size: 2.2em; margin-bottom: 0.2em; }
        h2 { font-size: 1.5em; margin-top: 1.5em; }
        h3 { font-size: 1.2em; margin-top: 1.2em; }
        table { border-collapse: collapse; width: 100%; margin: 1.5em 0; }
        th, td { border: 1px solid #ccc; padding: 8px 12px; text-align: left; }
        th { background: #e3eafc; }
        tr:nth-child(even) { background: #f6fafd; }
        code, pre { background: #f4f4f4; padding: 2px 6px; border-radius: 4px; }
        ul { margin-left: 1.5em; }
        .note { background: #fffbe6; border-left: 4px solid #ffe066; padding: 10px 16px; margin: 1em 0; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Flask Pricing Calculator App</h1>
    <h2>Overview</h2>
    <p>This is a robust, production-ready pricing calculator web application built with Flask. It is designed for messaging services with complex pricing logic, dynamic inclusions, advanced analytics, and a professional UI. The app is suitable for deployment on platforms like Railway.</p>

    <h2>Features</h2>
    <ul>
        <li><b>Dynamic Inclusions:</b> Shows only the highest/most specific inclusions based on user selections (tiers, add-ons, etc.), avoiding duplicates or contradictions.</li>
        <li><b>Detailed Pricing & Margin Tables:</b> Cleanly formatted, always accurate, and includes both chosen and rate card prices.</li>
        <li><b>Discount Validation:</b> Prevents users from entering prices below allowed thresholds (see table below).</li>
        <li><b>Session & Error Handling:</b> Robust handling of session data and user errors.</li>
        <li><b>Professional UI:</b> Modern, clear, and user-friendly interface.</li>
        <li><b>Analytics Dashboard:</b> Tracks calculations, message volumes, platform fee stats, margins, and more, with both tables and Chart.js graphs.</li>
        <li><b>Code Documentation:</b> Well-commented code and templates for easy maintenance.</li>
    </ul>

    <h2>Setup Instructions</h2>
    <ol>
        <li><b>Clone the repository:</b>
            <pre><code>git clone &lt;repo-url&gt;
cd pythonProject</code></pre>
        </li>
        <li><b>Install dependencies:</b>
            <pre><code>pip install -r requirements.txt</code></pre>
        </li>
        <li><b>Run the app:</b>
            <pre><code>python app.py</code></pre>
            Or use your preferred WSGI server (e.g., gunicorn) for production.
        </li>
    </ol>

    <h2>Usage</h2>
    <ul>
        <li>Go to the home page and enter your message volumes and platform options.</li>
        <li>Enter your chosen prices (within allowed discount limits).</li>
        <li>View the detailed pricing, inclusions, and margin tables.</li>
        <li>Access the analytics dashboard (with the secret keyword) to view usage stats and trends.</li>
        <li>To reset analytics, send a POST request to <code>/reset-analytics</code>.</li>
    </ul>

    <h2>Discount Rules</h2>
    <p>The following table summarizes the maximum discounts users can give for each item:</p>
    <table>
        <tr>
            <th>Item</th>
            <th>Maximum Discount Allowed</th>
            <th>Minimum Price (as % of Rate Card)</th>
        </tr>
        <tr>
            <td><b>AI Message</b></td>
            <td>70%</td>
            <td>30%</td>
        </tr>
        <tr>
            <td><b>Advanced Message</b></td>
            <td>70%</td>
            <td>30%</td>
        </tr>
        <tr>
            <td><b>Basic Utility/Authentication</b></td>
            <td>70%</td>
            <td>30%</td>
        </tr>
        <tr>
            <td><b>Basic Marketing Message</b></td>
            <td>90%</td>
            <td>10%</td>
        </tr>
        <tr>
            <td><b>Platform Fee</b></td>
            <td>70%</td>
            <td>30%</td>
        </tr>
    </table>
    <div class="note">
        <b>Note:</b> If a user tries to enter a price lower than the minimum allowed, the app will show an error and block the calculation.
    </div>

    <h2>Analytics Dashboard</h2>
    <ul>
        <li>View total calculations, breakdowns by day/week/country, platform fee stats, message volume distributions, and more.</li>
        <li>For each country, see a table of Average, Min, Max, and Median for platform fee and each message type, plus interactive graphs.</li>
    </ul>

    <h2>Code Structure</h2>
    <ul>
        <li><code>app.py</code> — Main Flask app, routes, logic, analytics, and inclusions.</li>
        <li><code>calculator.py</code> — Pricing and margin calculation logic.</li>
        <li><code>templates/</code> — HTML templates for the UI and analytics dashboard.</li>
        <li><code>static/</code> — Static files (e.g., diagrams).</li>
        <li><code>requirements.txt</code> — Python dependencies.</li>
    </ul>

    <h2>Security</h2>
    <ul>
        <li>Analytics dashboard is protected by a secret keyword.</li>
        <li>All user input is validated and sanitized.</li>
    </ul>

    <h2>Contributing</h2>
    <p>Pull requests and suggestions are welcome! Please ensure code is well-documented and tested.</p>

    <h2>License</h2>
    <p>Gupshup</p>
</body>
</html> 